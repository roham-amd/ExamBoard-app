# کارایی — فاز ۷

## تایم‌لاین تخصیص‌ها



- `TimelineItem` و `RoomLane` با `React.memo` و پراپس ثابت (مانند `handleSelect`) از رندرهای تکراری جلوگیری می‌کنند.
- `segmentsByRoom` با `useMemo` نگاشت اتاق ← کارت‌ها را پیش‌محاسبه کرده و فیلتر دوباره در هر رندر را حذف می‌کند.
- دکمه‌های نوج فقط در حالت انتخاب شده رندر می‌شوند تا DOM سبک باقی بماند.

## پایگاه دادهٔ کلاینت


- کوئری‌های ظرفیت و تخصیص‌ها همچنان با React Query کش می‌شوند؛ نوج‌های صفحه‌کلید همان Mutation قبلی را استفاده می‌کنند و درخواست اضافی ایجاد نمی‌شود.

## باندل و کداسپلیت


- کد Cypress فقط در محیط تست مصرف می‌شود.
- `AccessibilityProvider` به‌صورت تنبل (`dynamic import`) فقط در توسعه `@axe-core/react` را بارگذاری می‌کند تا باندل تولید سبک بماند.

## توصیه برای داده‌های حجیم



- قبل از رندر جدول‌های بزرگ، از فیلترهای سمت کاربر برای محدود کردن نتایج استفاده کنید؛ `DataTable` همچنان Lazy و سبک است.
- تایم‌لاین با اندازه‌گیری عرض عنصر والد (`ResizeObserver`) و محاسبه درصدها، بدون رندر مجدد Canvas یا SVG اجرا می‌شود.
