# تست‌های فرانت‌اند — فاز ۷

## واحد و کامپوننت (Vitest + RTL)
- اجرای همهٔ تست‌ها: `npm run test`
- اجرا در حالت تماشاگر: `npm run test:watch`
- فایل پیکربندی: `vitest.config.ts` با محیط `jsdom` و `test/setup.ts` برای ماک کردن Next و Polyfill ها.
- نمونه‌ها:
  - `data-table.test.tsx` حالت‌های بارگذاری/خطا و رندر جدول را بررسی می‌کند.
  - `room-form-schema.test.ts` اعتبارسنجی اسکیماهای زود را تضمین می‌کند.
  - `timeline-utils.test.ts` منطق اسنپ و کلَمپ نوج‌های تایم‌لاین را پوشش می‌دهد.

## E2E (Cypress)
- اجرا: `npm run test:e2e`
- پیکربندی: `cypress.config.ts` با `baseUrl` معادل Next dev (`http://localhost:3000`).
- سناریوها در `cypress/e2e/phase7.cy.ts` شامل:
  - ورود از طریق روت‌های پروکسی و بررسی کش ریکوئست‌ها.
  - CRUD سالن‌ها با پاسخ خوشبینانه.
  - فیلتر جدول زمانی عمومی و هندل رد شدن تغییرات DnD از سرور.
- برای اجرای واقعی، ابتدا `npm run dev` را در ترمینالی دیگر اجرا کنید.

## پوشش
- گزارش‌های پوشش Vitest در `coverage/unit` (متن و HTML) تولید می‌شود.
- Cypress ویدئو/اسکرین‌شات تولید نمی‌کند (برای جلوگیری از فایل‌های حجیم در PR).
